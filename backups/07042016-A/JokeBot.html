<!-- <html>

<head>
    <meta charset="utf-8">
    <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="js/robotOne.js"></script>
    <script type="text/javascript" src="js/actions.js"></script>
</head>

<body>

    <script>
        var svgWidth = 1270;

        var svgHeight = 780;

        var svgContainer = d3.select("body").append("svg")
            .attr("width", svgWidth)
            .attr("height", svgHeight);
        loadRobotOne();

        function displayDate() {
            console.log('in displayDate:', Date());
        }

        var myStartCallback = function myStartCallback() {
            console.log('in my start callback');
        }

        var myEndCallback = function() {
            console.log('in my end callback');
            document.getElementsByClassName("repeatQuestion")[0].click();
        }

        var myEndCallback2 = function() {
            console.log('in my end callback2');
            document.getElementsByClassName("punchLine")[0].click();
        }

        var myEndCallback3 = function() {
            console.log('in my end callback3');
            document.getElementById("rimShot").play();
            setTimeout(function() {
                document.getElementById("applause").play();
            }, 2000);
            setTimeout(function() {
                document.getElementById("crickets").play();
            }, 7000);
        }
    </script>
    <script type="text/javascript" type="text/javascript">
        // Connecting to ROS
        // -----------------

        var ros = new ROSLIB.Ros({
            url: 'ws://localhost:9090'
        });

        ros.on('connection', function() {
            console.log('Connected to websocket server.');
        });

        ros.on('error', function(error) {
            console.log('Error connecting to websocket server: ', error);
        });

        ros.on('close', function() {
            console.log('Connection to websocket server closed.');
        });


        // Subscribing to a Topic
        // ----------------------

        var listener = new ROSLIB.Topic({
            ros: ros,
            name: '/chatter',
            messageType: 'std_msgs/String'
        });

        var lastDate = new Date((new Date()).getTime() - 10000);

        listener.subscribe(function(message) {
            console.log('Received message on ' + listener.name + ': ' + message.data);
            if ((lastDate.getTime() + 10000) < new Date()) {
                lastDate = new Date();
                //listener.unsubscribe();
                document.getElementsByClassName("jokeOne")[0].click();

                var duration = 22;
                dispatch.iAmJokeBot({
                    "duration": duration
                });
            }
        });
    </script>
    <input hidden class='jokeOne' class='jokebot-intro' onclick='responsiveVoice.speak("I am the joke bot 5000, would you like to hear a joke?", "UK English Male", {volume: 1});' type='button' />

    <input onclick='responsiveVoice.speak("What did the finger say to the thumb?", "UK English Male",
	{rate: 1, onstart: myStartCallback, onend: myEndCallback});' type='button' value='Play' />

    <input hidden class='repeatQuestion' onclick='responsiveVoice.speak("I do not know what did the finger say to the thumb?", "UK English Female", {onend: myEndCallback2});' type='button' />
    <input hidden class='punchLine' onclick='responsiveVoice.speak("I am in glove with you.", "UK English Male", {onend: myEndCallback3});' type='button' />

    <audio hidden id="rimShot" controls>
        <source src="https://ia800501.us.archive.org/17/items/rimshot_739/rimshot.mp3" type="audio/mpeg"> Your browser does not support the audio element.
    </audio>

    <audio hidden id="applause" controls>
        <source src="audio/applause6.mp3" type="audio/mpeg"> Your browser does not support the audio element.
    </audio>

    <audio hidden id="crickets" controls>
        <source src="http://files.anitalink.com/gamecache/hl/dod/sound/ambience/cricket.wav" type="audio/wav"> Your browser does not support the audio element.
    </audio>
</body>

</html> -->
